<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<title>[[#{tea10.title}]]</title>
	<link href="/css/bootstrap.min.css" rel="stylesheet"/>
	<link href="/css/common.css" rel="stylesheet"/>
	<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"/>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/common.js"></script>

</head>
<body>
<div class="wrapper fadeInDown">
	<div id="formContent">
		<!-- Tabs Titles -->

		<!-- Icon -->
		<div class="fadeIn first">
			<img src="/images/logo.gif" id="icon" alt="User Icon" />
		</div>

		<!-- Form -->
		<form onclick="return false">
			<legend>[[#{tea10.title}]]</legend>
			<div class="row">
				<table class="table table-bordered" id="group">
					<caption>[[#{tea10.onJobInfo}]]</caption>
					<thead>
						<tr>
							<th>[[#{tea10.type}]]</th>
							<th>[[#{tea10.where}]]</th>
							<th>[[#{tea10.time}]]</th>
						</tr>
					</thead>
					<tbody>

					</tbody>
				</table>
			</div>

			<div class="row">
				<table class="table table-bordered" id="group1">
					<caption>[[#{tea10.mony}]]</caption>
					<thead>
					<tr>
						<th>[[#{tea10.inTime}]]</th>
						<th>[[#{tea10.times}]]</th>
					</tr>
					</thead>
					<tbody>

					</tbody>
				</table>
			</div>

			<div class="row">
					<input type="submit" id="return" value="返回" class="btn btn-primary btn-wide" />
			</div>
		</form>

		<!-- fotter -->
		<div id="formFooter">
			<p>[[#{tea10.tip1}]]<span class="label label-danger">[[#{tea10.tip2}]]</span></p>
		</div>

	</div>
</div>
<script>
	$('#icon').click(function (){
		location.href = "/user/user_tea1";
	});

	$('#return').click(function (){
		location.href = "/user/user_tea9";
	});

	$(function(){
		let object = {}
		let data = JSON.stringify(object)

		$.ajax({
			type: "POST",
			url: "/user/record-info",
			data: data,
			dataType: "json",
			contentType: 'application/json; charset=UTF-8',
			cache: false,
			async: false,
			success: function (res) {
				if (res.code == 0) {
					let map = res.data;
					for(let key in map){
						let length = Object.keys(map[key]).length;

						var trVar = '<tr>' + '<td rowspan="' + length +'">'+ key + '</td>';
						for(let k in map[key]){
							let k1 =  map[key][k];
							k == 1 ? k = "[[#{tea10.inCompany}]]" : k = "[[#{tea10.outCompany}]]";
							trVar = trVar + '<td>' + k + '</td>' + '<td>' + k1 + '</td>' + '</tr>';
						}
						$('#group').append(trVar);
					}
				}
			}
		});

		$.ajax({
			type: "POST",
			url: "/user/record-type",
			data: data,
			dataType: "json",
			contentType: 'application/json; charset=UTF-8',
			cache: false,
			async: false,
			success: function (res) {
				if (res.code == 0) {
					let map = res.data;
					for(let key in map){
						$('#group1').append('<tr> ' +
								'<td>' + key + '</td>' +
								'<td>' + map[key] + '</td>' +
								'</tr>')
					}
				}else {
					alert(res.msg);
				}
			}
		})


	});
</script>
</body>

</html>