<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<title>Login</title>
	<link href="/css/bootstrap.min.css" rel="stylesheet"/>
	<link href="/css/common.css" rel="stylesheet"/>
	<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"/>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/common.js"></script>

</head>
<body>
<div class="wrapper fadeInDown">
	<div id="formContent">
		<!-- Tabs Titles -->

		<!-- Icon -->
		<div class="fadeIn first">
			<img src="/images/logo.gif" id="icon" alt="User Icon" />
		</div>

		<!-- Login Form -->
		<form onclick="return false">
			<input type="text" id="userName" class="fadeIn second" name="login" th:placeholder="#{login.userName}">
			<input type="password" id="passWord" class="fadeIn third" name="login" th:placeholder="#{login.passWord}">
			<input type="submit" id="login" class="fadeIn fourth" th:value="#{login.login}">
		</form>

		<!-- Remind Passowrd -->
		<div id="formFooter">
			<a href="?lang=zh_CN">简体中文</a> &nbsp;&nbsp;
			<a href="?lang=ja_JP">日本語</a>
<!--			<a class="underlineHover" href="#">[[#{login.info}]]</a>-->
		</div>

	</div>
</div>
<script>
	$('#login').click(function (){
		const userName = $("#userName").val().toString();
		const passWord = $("#passWord").val().toString();
		if (userName == "") {
			alert("[[#{login.userNameInfo}]]");
			$("#userName").focus();
			return false;
		}
		if (passWord == "") {
			alert("[[#{login.passWordInfo}]]");
			$("#passWord").focus();
			return false;
		}

		let object = {
					username:userName,
					password:passWord
				}
		let data = JSON.stringify(object)

		$.ajax({
			type: "POST",
			url: "/user/login",
			data: data,
			dataType: "json",
			contentType: 'application/json; charset=UTF-8',
			cache: false,
			async: false,
			success: function (res) {
				if (res.code == 0) {
					if(userName.substring(0,1) == "S") {
						location.href = "/user/user_stu1";
					}else if(userName.substring(0,1) == "T"){
						location.href = "/user/user_tea1";
					}
					sessionStorage.setItem('userName', userName)
				}else {
					alert(res.msg);
					$("#userName").val("");
					$("#passWord").val("");
					$("#userName").focus();
					return false;
				}
			}
		})
	});
</script>
</body>

</html>